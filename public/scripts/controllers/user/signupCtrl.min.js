/*! collection-application 2018-02-15 */

"use strict";angular.module("collectionApp").controller("signupCtrl",["$scope","$log","$http","$timeout","$location","User","$stateParams","Auth",function(s,e,r,o,n,t,c,i){s.users={},function(){var e=c.user_name;o(function(){e?(s.users.permission="User",s.users.user_name=e):s.users.permission="User"},200)}(),s.submit=function(e){s.errorMsg=!1,s.loading=!0,e?t.create(s.users).success(function(e){e.success?(s.successMsg=e.message,i.login(s.users).then(function(r){r.data.success?o(function(){n.path("/dashboard/item/info")},2e3):(s.loading=!1,s.errorMsg=e.message)})):(s.loading=!1,s.errorMsg=e.message)}):(s.loading=!1,s.errorMsg="Please ensure from is filled our properly")},s.users={},s.resetPassword=function(e){s.errorMsg=!1,e?r.put("/resetPassword/"+c.token,s.users).success(function(e){e.success?(s.successMsg=e.message,s.users={},o(function(){n.path("/login")},2e3)):(s.loading=!1,s.errorMsg=e.message)}):s.errorMsg="Please ensure from is filled our properly"}}]).directive("match",function(){return{restrict:"A",controller:["$scope",function(s){s.confirmed=!1,s.doConfirm=function(e){e.forEach(function(e){s.confirm==e?s.confirmed=!0:s.confirmed=!1})}}],link:function(s,e,r){r.$observe("match",function(){s.matches=JSON.parse(r.match),s.doConfirm(s.matches)}),s.$watch("confirm",function(){s.matches=JSON.parse(r.match),s.doConfirm(s.matches)})}}}).controller("forgateCtrl",function(s,e,r){s.forgateData={},s.sendMail=function(){r.put("/sendResetLink",s.forgateData).success(function(e){alert(e.message),s.forgateData={}})}});